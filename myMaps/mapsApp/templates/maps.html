<!DOCTYPE html>
<html lang="en">

{% load static %}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Maps</title>
    <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>
    <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/maps.css' %}">
    <script src="https://kit.fontawesome.com/36bce782d3.js" crossorigin="anonymous"></script>
</head>

<body>
    {%if alert%}
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        <strong>Congratulations!!!</strong> {{alert}}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {%endif%}
    <form action="/signIn/signOut" class="sign_out_button">
        <button type="submit"><i class="fa-solid fa-person-through-window"></i></button>
    </form>
    <form class="route_create_form" action="/maps/newRoute/" method="post">
        <div class="expand_create_route_button"><i class="fa-solid fa-map-location-dot"></i></div>
        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
        <div class="form_container hidden">
            <div class="close_create_form_button">X</div>
            <div class="form">
                <div class="start">
                    <div class="mb-3 coordinates">
                        <label for="start_lat" class="form-label">Start Latitude</label>
                        <input type="text" class="form-control" id="start_lat" name="start_lat" placeholder="24.24235234" required>
                    </div>
                    <div class="mb-3 coordinates">
                        <label for="start_long" class="form-label">Start Longitude</label>
                        <input type="text" class="form-control" id="start_long" name="start_long" placeholder="-34.24235234" required>
                    </div>
                    <div class="location_pin_button"><i class="fa-solid fa-location-dot"></i></div>
                </div>
                <div class="end">
                    <div class="mb-3 coordinates">
                        <label for="end_lat" class="form-label">End Latitude</label>
                        <input type="text" class="form-control" id="end_lat" name="end_lat" placeholder="24.24235234" required>
                    </div>
                    <div class="mb-3 coordinates">
                        <label for="end_long" class="form-label">End Longitude</label>
                        <input type="text" class="form-control" id="end_long" name="end_long" placeholder="-34.24235234" required>
                    </div>
                    <div class="location_pin_button"><i class="fa-solid fa-location-dot"></i></div>
                </div>
                <div class="form_entry">
                <div id="route_name_container" class="mb-3">
                    <label for="route_name" class="form-label">Route Name</label>
                    <input type="text" class="form-control" id="route_name" name="route_name" placeholder="Route Name" required>
                </div>
                <button type="submit" class="btn btn-light">Save Route</button>
                </div>
            </div>
        </div>
    </form>
    <div class="routes">
        <div class="iconcontainer"><i class="fa-solid fa-route routes_icon" style="color: #ffffff;"></i></div>
        <div class="close_button_container hidden">
            <i class="fa-solid fa-x close_button"></i>
        </div>
        
        <div class="route_container hidden">
            <h2>Routes</h2>
            <div class="routes_display">
                {% for route in routes%}
                <div class="route" data-routeName="{{ route.routeName }}">
                    <h2>{{route.routeName}}</h2>
                    <form action="/maps/deleteRoute/" class="delete_route_form" method="post">
                        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                        <input type="hidden" name="route_name" value="{{ route.routeName }}">
                        <button type="submit" class="delete_button"><i class="fa-solid fa-trash"></i></button>
                    </form>
                </div>
                
                {% endfor%}
            </div>
        </div>
    </div>
    <div id="user-data" data-routes="{{ routes_json }}"></div>
    <div id="map"></div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="{% static 'js/mapbox.js' %}"></script>
</body>

</html>